<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home - LinkTour</title>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #f2f2f2;
    padding-bottom: 60px;
}
.container {
    display: grid;
    grid-template-columns: 1fr minmax(300px, 600px) 350px;
    gap: 20px;
    width: 100%;
    max-width: 1600px;
    margin: 0 auto;
}
@media (max-width: 1200px) { .container { grid-template-columns: 1fr minmax(300px, 600px); } }
@media (max-width: 768px) { .container { grid-template-columns: 1fr; } .painelDireita { display: none; } }

/* Header */
header { display:flex; align-items:center; padding:10px 15px; gap:10px; background-color:#fff; position:sticky; top:0; z-index:100; }
header input { flex:1; padding:8px 12px; border-radius:20px; border:1px solid #ccc; }

/* Abas */
.abas { display:flex; justify-content:space-around; background-color:#fff; padding:10px 0; border-bottom:1px solid #ddd; position:sticky; top:60px; z-index:99; }
.abas div { font-weight:bold; cursor:pointer; }

/* Feed */
.feed { padding:10px; }
.poste { background-color:#fff; border-radius:10px; padding:10px; margin-bottom:15px; box-shadow:0 2px 5px rgba(0,0,0,0.05); position:relative; }

.usuario { display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
.fotoUsuario { width:40px; height:40px; border-radius:50%; background-color:#ccc; margin-right:10px; }
.fotoUsuario img { width:100%; height:100%; border-radius:50%; }
.infoUsuario { flex:1; }
.nomeUsuario { font-weight:bold; }
.postadoem { font-size:12px; color:#888; }

/* Botão de 3 pontinhos */
.menuPost { position:relative; }
.menuBtn { background:none; border:none; font-size:20px; cursor:pointer; }
.menuOpcoes { 
    display:none; 
    position:absolute; 
    right:0; 
    top:25px; 
    background:#fff; 
    border:1px solid #ddd; 
    border-radius:8px; 
    box-shadow:0 2px 5px rgba(0,0,0,0.1); 
    overflow:hidden;
    z-index:10;
}
.menuOpcoes div { padding:10px 15px; cursor:pointer; font-size:14px; }
.menuOpcoes div:hover { background:#f2f2f2; }

/* Publicação */
.fotoPubli { position:relative; width:100%; border-radius:10px; overflow:hidden; margin-bottom:10px; }
.fotoPubli img { width:100%; height:auto; display:block; }
.acoesPost { position:absolute; bottom:10px; right:10px; display:flex; gap:12px; }
.botaoAcao { 
    width:40px; 
    height:40px; 
    border-radius:50%; 
    background:rgba(255,255,255,0.9); 
    display:flex; 
    justify-content:center; 
    align-items:center; 
    box-shadow:0 2px 5px rgba(0,0,0,0.1); 
    cursor:pointer; 
    transition:transform 0.2s ease; 
}
.botaoAcao:hover { transform:scale(1.1); }
.botaoAcao img { width:22px; height:22px; }

.desc { font-size:14px; color:#333; margin-top:10px; }

/* Rodapé fixo */
.barraInferior { position:fixed; bottom:0; left:0; width:100%; display:flex; justify-content:space-around; align-items:center; background-color:#fff; padding:10px 0; border-top:1px solid #ddd; z-index:999; }
.barraInferior a { display:flex; justify-content:center; align-items:center; text-decoration:none; }
.barraInferior img { width:30px; height:30px; }
.barraInferior a.ativo img { filter:brightness(1.2); }

/* Painel lateral */
.painelDireita { position:sticky; top:10px; align-self:start; padding:10px; }
.search-box { background:#fff; padding:8px; border-radius:20px; display:flex; align-items:center; border:1px solid #ddd; margin-bottom:20px; }
.search-box input { border:none; outline:none; flex:1; padding:5px 8px; }
.card-sugestoes { background:#fff; border-radius:12px; padding:15px; margin-bottom:20px; box-shadow:0 2px 5px rgba(0,0,0,0.05); }
.card-sugestoes h3 { margin-top:0; margin-bottom:10px; font-size:16px; }
.sugestao { display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; }
.sugestao:last-child { margin-bottom:0; }
.sugestao .fotoUsuario { margin:0 10px 0 0; }

/* Modal Edição - corrigido */
#modalEditar {
    display:none;
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.5);
    justify-content:center;
    align-items:center;
    z-index:9999;
}
#modalEditar .conteudo {
    background:#fff;
    padding:20px;
    border-radius:12px;
    width:90%;
    max-width:450px;
    max-height:90%;
    overflow-y:auto;
    box-sizing:border-box;
}
#modalEditar h3 { margin-top:0; text-align:center; }
#modalEditar label { display:block; margin-top:10px; font-weight:bold; }
#modalEditar input, #modalEditar textarea { width:100%; padding:8px; margin-top:5px; border-radius:6px; border:1px solid #ccc; box-sizing:border-box; }
#modalEditar button { margin-top:15px; padding:10px; border:none; border-radius:8px; background:#e60050; color:white; cursor:pointer; width:100%; }
#modalEditar button:hover { background:#cc0045; }
#modalEditar #fechar-edicao { background:#ccc; color:#000; margin-top:5px; }

</style>
</head>
<body>

<div class="container">

  <!-- Feed central -->
  <div>
    <header>
        <img src="/img/icons8-pesquisa-50.png" alt="" style="width:30px;height:30px;">
        <input type="text" placeholder="Busca">
    </header>

    <div class="abas">
        <div>Todos</div>
        <div>Para você</div>
        <div>Seguindo</div>
    </div>

    <div class="feed" id="feedHome"></div>
  </div>

  <!-- Painel lateral -->
  <div class="painelDireita">
    <div class="search-box">
      <img src="/img/icons8-pesquisa-50.png" alt="" style="width:30px;height:30px;"> 
      <input type="text" placeholder="Pesquisar">
    </div>

    <div class="card-sugestoes">
      <h3>Quem seguir</h3>
      <div class="sugestao">
        <div style="display:flex; align-items:center;">
          <div class="fotoUsuario"><img src="https://i.pinimg.com/736x/99/18/d7/9918d7ad96f25dede0628dc9b12086c8.jpg" alt=""></div>
          <div>@eventosSP</div>
        </div>
        <button class="seguir">Seguir</button>
      </div>
      <div class="sugestao">
        <div style="display:flex; align-items:center;">
          <div class="fotoUsuario"><img src="https://i.pinimg.com/736x/9a/cc/83/9acc8359bcb7ca9e6b299b0bf3c0517c.jpg" alt=""></div>
          <div>@festasRJ</div>
        </div>
        <button class="seguir">Seguir</button>
      </div>
    </div>
  </div>

</div>

<!-- Rodapé -->
<div class="barraInferior">
  <a href="/HTML/home.HTML" class="ativo"><img src="/img/icons8-casa-48.png" alt=""></a>
  <a href="/HTML/mapa.html"><img src="/img/icons8-mapa-50.png" alt=""></a>
  <a href="/HTML/add.html"><img src="/img/icons8-mais-50.png" alt=""></a>
  <a href="/HTML/serv.html"><img src="/img/icons8-parceiro-50.png" alt=""></a>
  <a href="/HTML/perfil.html"><img src="/img/icons8-conta-de-teste-50.png" alt=""></a>
</div>

<!-- Modal Edição -->
<div id="modalEditar">
  <div class="conteudo">
    <h3>Editar Evento</h3>
    <label>Nome do Evento</label>
    <input type="text" id="editar-nome">
    <label>Descrição</label>
    <textarea id="editar-desc"></textarea>
    <label>Endereço</label>
    <input type="text" id="editar-endereco">
    <label>Hora</label>
    <input type="text" id="editar-hora">
    <label>Valor</label>
    <input type="text" id="editar-valor">
    <label>Imagem</label>
    <input type="file" id="editar-imagem" accept="image/*">
    <img id="preview-imagem" style="width:100%; margin-top:10px; border-radius:8px;">
    <button id="salvar-edicao">Salvar</button>
    <button id="fechar-edicao">Cancelar</button>
  </div>
</div>

<script>
// Nome e foto do usuário logado
const nomeUsuarioLogado = localStorage.getItem("usuario") || "Você";
const fotoUsuarioLogado = localStorage.getItem("foto") || "https://via.placeholder.com/40";

let eventos = JSON.parse(localStorage.getItem("eventos")) || [];

// Função para criar o HTML do post
function renderizarEventos() {
    const feed = document.getElementById("feedHome");
    feed.innerHTML = "";
    eventos.forEach((ev, idx) => {
        const div = document.createElement("div");
        div.className = "poste";
        div.innerHTML = `
            <div class="usuario">
                <div style="display:flex; align-items:center;">
                    <div class="fotoUsuario"><img src="${fotoUsuarioLogado}" alt=""></div>
                    <div class="infoUsuario">
                        <div class="nomeUsuario">${ev.usuario}</div>
                        <div class="postadoem">Agora</div>
                    </div>
                </div>
                <div class="menuPost">
                    <button class="menuBtn">⋮</button>
                    <div class="menuOpcoes">
                        <div onclick="editarEvento(${idx})">Editar</div>
                        <div onclick="apagarEvento(${idx})">Remover</div>
                    </div>
                </div>
            </div>
            <div class="fotoPubli">
                <img src="${ev.imagem}" alt="">
                <div class="acoesPost">
                    <div class="botaoAcao"><img src="/img/icons8-coração-50.png" alt="Curtir"></div>
                    <div class="botaoAcao"><img src="/img/icons8-fita-de-bookmark-50.png" alt="Salvar"></div>
                    <div class="botaoAcao"><img src="/img/icons8-comentários-50.png" alt="Comentar"></div>
                    <div class="botaoAcao"><img src="/img/icons8-compartilhar-50.png" alt="Compartilhar"></div>
                </div>
            </div>
            <div class="desc">
                <strong>${ev.nome}</strong><br>
                ${ev.desc}<br><br>
                Endereço: ${ev.endereco}<br>
                Hora: ${ev.hora}<br>
                Valor: ${ev.valor}
            </div>
        `;
        feed.appendChild(div);

        // Ativar menu de 3 pontinhos
        const menuBtn = div.querySelector(".menuBtn");
        const menuOpcoes = div.querySelector(".menuOpcoes");
        menuBtn.addEventListener("click", () => {
            menuOpcoes.style.display = menuOpcoes.style.display === "block" ? "none" : "block";
        });
        document.addEventListener("click", (e) => {
            if (!div.contains(e.target)) menuOpcoes.style.display = "none";
        });
    });
}

// Apagar evento
function apagarEvento(idx){
    if(confirm("Deseja realmente apagar este evento?")){
        eventos.splice(idx,1);
        localStorage.setItem("eventos", JSON.stringify(eventos));
        renderizarEventos();
    }
}

// Editar evento
let eventoEditarIdx = null;
function editarEvento(idx){
    eventoEditarIdx = idx;
    const ev = eventos[idx];
    document.getElementById("editar-nome").value = ev.nome;
    document.getElementById("editar-desc").value = ev.desc;
    document.getElementById("editar-endereco").value = ev.endereco;
    document.getElementById("editar-hora").value = ev.hora;
    document.getElementById("editar-valor").value = ev.valor;
    document.getElementById("preview-imagem").src = ev.imagem;
    document.getElementById("modalEditar").style.display = "flex";
}

document.getElementById("fechar-edicao").addEventListener("click", () => {
    document.getElementById("modalEditar").style.display = "none";
});

document.getElementById("editar-imagem").addEventListener("change", e => {
    const file = e.target.files[0];
    if(file){
        const reader = new FileReader();
        reader.onload = e => document.getElementById("preview-imagem").src = e.target.result;
        reader.readAsDataURL(file);
    }
});

document.getElementById("salvar-edicao").addEventListener("click", () => {
    if(eventoEditarIdx !== null){
        const ev = eventos[eventoEditarIdx];
        ev.nome = document.getElementById("editar-nome").value;
        ev.desc = document.getElementById("editar-desc").value;
        ev.endereco = document.getElementById("editar-endereco").value;
        ev.hora = document.getElementById("editar-hora").value;
        ev.valor = document.getElementById("editar-valor").value;
        ev.imagem = document.getElementById("preview-imagem").src;
        localStorage.setItem("eventos", JSON.stringify(eventos));
        renderizarEventos();
        document.getElementById("modalEditar").style.display = "none";
    }
});

// Inicializa feed
renderizarEventos();
</script>

</body>
</html>
