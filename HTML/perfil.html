<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Perfil</title>
<style>
  body { margin: 0; font-family: Arial, sans-serif; background-color: #f9f9f9; }

  .banner { width: 100%; height: 180px; background: #ccc; background-size: cover; background-position: center; position: relative; }

  .perfil-foto { width: 100px; height: 100px; border-radius: 50%; border: 3px solid #fff; position: absolute; bottom: -50px; left: 50%; transform: translateX(-50%); overflow: hidden; }
  .perfil-foto img { width: 100%; height: 100%; object-fit: cover; }

  .perfil-info { text-align: center; margin-top: 60px; padding: 10px; }
  .perfil-info h2 { margin: 5px 0; font-size: 18px; }
  .perfil-info p { margin: 5px 0; color: #666; font-size: 14px; }

  #editar-perfil, #sugestao-btn { margin-top: 10px; padding: 8px 20px; border: none; border-radius: 8px; background-color: #e60050; color: white; font-weight: bold; cursor: pointer; transition: 0.3s; }
  #editar-perfil:hover, #sugestao-btn:hover { background-color: #cc0045; }

  .stats { display: flex; justify-content: center; gap: 40px; margin: 15px 0; }
  .stats div { text-align: center; }
  .stats strong { display: block; font-size: 16px; }

  .abas { display: flex; justify-content: center; gap: 15px; border-top: 1px solid #ddd; border-bottom: 1px solid #ddd; padding: 10px 0; background: #fff; margin-bottom: 10px; }
  .abas img{ width: 30px; height: 30px; }

  .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; padding: 10px; }
  .grid img { width: 100%; border-radius: 8px; height: 160px; object-fit: cover; }

  .barraInferior { position: fixed; bottom: 0; width: 100%; display: flex; justify-content: space-around; background-color: #fff; padding: 10px 0; border-top: 1px solid #ddd; z-index: 200; }
  .barraInferior img{ width: 30px; height: 30px; }

  #modalEditar,
#modalSugestao {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  justify-content: center;
  align-items: center;
  z-index: 1000;
  overflow-y: auto; /* Permite rolagem no modal se necessário */
}

/* Conteúdo do modal */
#modalEditar .conteudo,
#modalSugestao .conteudo {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  width: 90%;
  max-width: 400px;
  box-sizing: border-box;
  max-height: 90vh;          /* Impede que ultrapasse a tela */
  overflow-y: auto;          /* Rolagem interna se passar do limite */
}

/* Labels */
#modalEditar label,
#modalSugestao label {
  display: block;
  margin-top: 10px;
  font-weight: bold;
}

/* Inputs e Textareas */
#modalEditar input,
#modalEditar textarea,
#modalSugestao textarea {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
  border-radius: 6px;
  border: 1px solid #ccc;
  box-sizing: border-box;
}

/* Botões */
#modalEditar button,
#modalSugestao button {
  margin-top: 15px;
  padding: 10px;
  border: none;
  border-radius: 8px;
  background: #e60050;
  color: white;
  cursor: pointer;
  width: 100%;
}

#modalEditar button:hover,
#modalSugestao button:hover {
  background: #cc0045;
}

  .preview-img { margin-top: 5px; width: 100%; max-height: 150px; object-fit: cover; border-radius: 8px; }
  .preview-foto { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; margin-top:5px; }
</style>
</head>
<body>

  <!-- Banner e foto -->
  <div class="banner" id="perfil-banner">
    <div class="perfil-foto">
      <img id="perfil-foto" src="https://via.placeholder.com/100" alt="Foto de Perfil">
    </div>
  </div>

  <!-- Info perfil -->
  <div class="perfil-info">
    <h2 id="perfil-nome">Usuário</h2>
    <p id="perfil-arroba">@usuario</p>
    <p id="perfil-desc">Descrição do perfil</p>
    <button id="editar-perfil">Editar Perfil</button>
    <button id="sugestao-btn">Sugestão</button>
  </div>

  <!-- Stats -->
  <div class="stats">
    <div><strong>0</strong> Seguindo</div>
    <div><strong>0</strong> Seguidores</div>
  </div>

  <!-- Abas -->
  <div class="abas" style="gap: 60px;">
    <div><img src="/img/icons8-fotos-50.png" alt=""></div>
    <div><img src="/img/icons8-mais-30.png" alt=""></div>
  </div>

  <!-- Grid de posts -->
  <div class="grid" id="gridPosts"></div>

  <!-- Rodapé -->
  <div class="barraInferior">
    <a href="/HTML/home.HTML"><img src="/img/icons8-casa-48.png" alt=""></a>
    <a href="/HTML/mapa.html"><img src="/img/icons8-mapa-50.png" alt=""></a>
    <a href="/HTML/add.html"><img src="/img/icons8-mais-50.png" alt=""></a>
    <a href="/HTML/serv.html"><img src="/img/icons8-parceiro-50.png" alt=""></a>
    <a href="/HTML/perfil.html"><img src="/img/icons8-conta-de-teste-50.png" alt=""></a>
  </div>

  <!-- Modal Sugestão -->
  <div id="modalSugestao">
    <div class="conteudo">
      <h3>Enviar Sugestão</h3>
      <label>Sua sugestão:</label>
      <textarea id="texto-sugestao"></textarea>
      <button id="enviar-sugestao">Enviar</button>
      <button id="fechar-sugestao" style="background:#ccc; color:#000; margin-top:5px;">Cancelar</button>
    </div>
  </div>

  <!-- Modal de edição -->
  <div id="modalEditar">
    <div class="conteudo">
      <h3>Editar Perfil</h3>
      <label>Nome</label>
      <input type="text" id="editar-nome">
      <label>@username</label>
      <input type="text" id="editar-arroba">
      <label>Descrição</label>
      <textarea id="editar-desc"></textarea>
      <label>Foto de Perfil (algumas fotos podem nao abrir, só substitua)</label>
      <input type="file" id="editar-foto-file" accept="image/*">
      <img id="preview-foto" class="preview-foto" src="https://via.placeholder.com/100">
      <label>Banner (algumas fotos podem nao abrir, só substitua)</label>
      <input type="file" id="editar-banner-file" accept="image/*">
      <img id="preview-banner" class="preview-img" src="https://via.placeholder.com/300x100?text=Banner">
      <button id="salvar-edicao">Salvar</button>
      <button id="fechar-edicao" style="background:#ccc; color:#000; margin-top:5px;">Cancelar</button>
    </div>
  </div>

<script>
  // Carregar perfil
  window.addEventListener("DOMContentLoaded", () => {
    const usuario = localStorage.getItem("usuario") || "Usuário";
    const arroba = localStorage.getItem("arroba") || "@usuario";
    const descricao = localStorage.getItem("descricao") || "Sem descrição";
    const foto = localStorage.getItem("foto") || "https://via.placeholder.com/100";
    const banner = localStorage.getItem("banner") || "https://via.placeholder.com/300x100?text=Banner";

    document.getElementById("perfil-nome").textContent = usuario;
    document.getElementById("perfil-arroba").textContent = arroba;
    document.getElementById("perfil-desc").textContent = descricao;
    document.getElementById("perfil-foto").src = foto;
    document.getElementById("perfil-banner").style.backgroundImage = `url(${banner})`;
  });

  // Sugestão
  const sugestaoBtn = document.getElementById("sugestao-btn");
  const modalSugestao = document.getElementById("modalSugestao");
  const fecharSugestao = document.getElementById("fechar-sugestao");
  const enviarSugestao = document.getElementById("enviar-sugestao");

  sugestaoBtn.addEventListener("click", ()=> modalSugestao.style.display = "flex");
  fecharSugestao.addEventListener("click", ()=> modalSugestao.style.display = "none");

  enviarSugestao.addEventListener("click", ()=> {
    const texto = document.getElementById("texto-sugestao").value.trim();
    if(texto){
      const usuario = localStorage.getItem("usuario") || "Usuário";
      const arroba = localStorage.getItem("arroba") || "@usuario";

      const sugestoes = JSON.parse(localStorage.getItem("sugestoes") || "[]");
      sugestoes.push({texto, data: new Date().toLocaleString(), nome: usuario, email: arroba});
      localStorage.setItem("sugestoes", JSON.stringify(sugestoes));
      alert("Sugestão enviada!");
      document.getElementById("texto-sugestao").value = "";
      modalSugestao.style.display = "none";
    } else {
      alert("Escreva algo antes de enviar!");
    }
  });

  // Editar Perfil
  const editarBtn = document.getElementById("editar-perfil");
  const modalEditar = document.getElementById("modalEditar");
  const fecharEdicao = document.getElementById("fechar-edicao");
  const salvarEdicao = document.getElementById("salvar-edicao");

  editarBtn.addEventListener("click", ()=> {
    document.getElementById("editar-nome").value = localStorage.getItem("usuario") || "";
    document.getElementById("editar-arroba").value = localStorage.getItem("arroba") || "";
    document.getElementById("editar-desc").value = localStorage.getItem("descricao") || "";
    document.getElementById("preview-foto").src = localStorage.getItem("foto") || "https://via.placeholder.com/100";
    document.getElementById("preview-banner").src = localStorage.getItem("banner") || "https://via.placeholder.com/300x100?text=Banner";
    modalEditar.style.display = "flex";
  });

  fecharEdicao.addEventListener("click", ()=> modalEditar.style.display = "none");

  // Preview foto perfil
  document.getElementById("editar-foto-file").addEventListener("change", function(e){
    const file = e.target.files[0];
    if(file){
      const reader = new FileReader();
      reader.onload = ()=> document.getElementById("preview-foto").src = reader.result;
      reader.readAsDataURL(file);
    }
  });

  // Preview banner
  document.getElementById("editar-banner-file").addEventListener("change", function(e){
    const file = e.target.files[0];
    if(file){
      const reader = new FileReader();
      reader.onload = ()=> document.getElementById("preview-banner").src = reader.result;
      reader.readAsDataURL(file);
    }
  });

  // Salvar edição
  salvarEdicao.addEventListener("click", ()=> {
    const nome = document.getElementById("editar-nome").value.trim();
    const arroba = document.getElementById("editar-arroba").value.trim();
    const descricao = document.getElementById("editar-desc").value.trim();
    const foto = document.getElementById("preview-foto").src;
    const banner = document.getElementById("preview-banner").src;

    if(nome) localStorage.setItem("usuario", nome);
    if(arroba) localStorage.setItem("arroba", arroba);
    if(descricao) localStorage.setItem("descricao", descricao);
    localStorage.setItem("foto", foto);
    localStorage.setItem("banner", banner);

    // Atualiza perfil
    document.getElementById("perfil-nome").textContent = nome || "Usuário";
    document.getElementById("perfil-arroba").textContent = arroba || "@usuario";
    document.getElementById("perfil-desc").textContent = descricao || "Sem descrição";
    document.getElementById("perfil-foto").src = foto;
    document.getElementById("perfil-banner").style.backgroundImage = `url(${banner})`;

    modalEditar.style.display = "none";
  });
</script>
</body>
</html>
